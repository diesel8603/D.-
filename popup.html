<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<title>√ñzel G√ºnlerimiz </title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
/* --- √ñnceki CSS aynen gelir --- */
#specialDaysApp {
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  color: #eaeef3;
  background: #0a0c10;
  min-height: 100vh;
  margin: 0;
}

/* HEADER */
.sd-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 14px 18px;
  gap: 12px;
  position: relative;
}
.sd-header h1 {
  margin: 0;
  font-size: 18px;
  letter-spacing: 0.2px;
  color: #f8fafc;
}

/* Men√º butonu ve popup */
.sd-menu {
  position: relative;
}
#menuBtn {
  background: transparent;
  border: none;
  cursor: pointer;
  padding: 6px;
  border-radius: 8px;
}
#menuBtn svg rect {
  fill: rgba(255, 255, 255, 0.9);
  opacity: 0.9;
}
.sd-menu-popup {
  position: absolute;
  right: 0;
  top: 40px;
  background: rgba(10, 12, 16, 0.85);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: 12px;
  padding: 10px;
  display: none;
  flex-direction: column;
  min-width: 140px;
  box-shadow: 0 12px 40px rgba(2, 6, 23, 0.8);
  z-index: 10;
}
.sd-menu-popup button {
  color: #e6eef6;
  background: transparent;
  border: none;
  padding: 12px 14px;
  text-align: left;
  cursor: pointer;
  border-radius: 8px;
  font-weight: 600;
  font-size: 14px;
  transition: background 0.3s ease;
}
.sd-menu-popup button:hover {
  background: rgba(255, 255, 255, 0.07);
}

/* Glass toggle button */
.glass-toggle-wrap {
  display: flex;
  justify-content: center;
  margin: 22px 0;
}
.glass-btn {
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.04));
  border: 1px solid rgba(255, 255, 255, 0.10);
  padding: 14px 28px;
  border-radius: 18px;
  cursor: pointer;
  font-weight: 700;
  color: #f6fbff;
  box-shadow: 0 8px 38px rgba(11, 14, 22, 0.75);
  transition: transform 0.25s ease, box-shadow 0.25s ease;
  backdrop-filter: blur(14px);
  font-size: 17px;
}
.glass-btn:hover {
  transform: translateY(-5px);
  box-shadow: 0 18px 48px rgba(4, 6, 14, 0.8);
}

/* Panel */
.glass-panel {
  width: min(920px, 94%);
  margin: 0 auto 48px auto;
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.04), rgba(255, 255, 255, 0.015));
  border-radius: 20px;
  padding: 24px 28px;
  border: 1.5px solid rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(16px) saturate(130%);
  transform-origin: center top;
  max-height: 70vh;
  overflow-y: auto;
  opacity: 0;
  pointer-events: none;
  transform: translateY(-8px) scale(0.995);
  transition: opacity 0.35s ease, transform 0.35s cubic-bezier(0.2, 0.9, 0.2, 1);
  box-shadow: 0 28px 70px rgba(2, 6, 23, 0.65);
}
.glass-panel.open {
  opacity: 1;
  pointer-events: all;
  transform: translateY(0) scale(1);
}

/* Panel header */
.panel-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
}
.panel-header h2 {
  margin: 0;
  font-size: 20px;
  font-weight: 700;
  color: #e8f0ff;
}
.panel-actions button {
  background: transparent;
  border: 1px solid rgba(255, 255, 255, 0.09);
  padding: 10px 14px;
  border-radius: 12px;
  cursor: pointer;
  color: #e9f2ff;
  font-weight: 600;
  font-size: 15px;
  transition: background 0.3s ease;
}
.panel-actions button:hover {
  background: rgba(255, 255, 255, 0.07);
}

/* Cards list */
.cards-list {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 16px;
  align-items: start;
}

/* Kartlar */
.card {
  background: linear-gradient(135deg, #1c2331, #0f131b);
  border-radius: 20px;
  padding: 20px 24px;
  min-height: 130px;
  position: relative;
  overflow: hidden;
  border: 1.5px solid #3b4a6b;
  box-shadow:
    0 8px 20px rgba(14, 26, 54, 0.7),
    inset 0 0 10px #5470ff66;
  color: #d0d8ff;
  transform: translateY(12px) scale(0.98);
  opacity: 0;
  transition:
    transform 0.45s cubic-bezier(0.2, 0.9, 0.2, 1),
    opacity 0.45s ease,
    box-shadow 0.3s ease;
  cursor: pointer;
}
.card.show {
  transform: translateY(0) scale(1);
  opacity: 1;
}
.card:hover {
  box-shadow:
    0 20px 48px rgba(45, 70, 160, 0.9),
    inset 0 0 14px #85a5ffbb;
  transform: translateY(-8px) scale(1.02) rotateZ(-0.3deg);
}
.card h4 {
  margin: 0 0 8px 0;
  font-size: 17px;
  font-weight: 700;
  color: #a4b5ff;
  text-shadow: 0 0 6px #6677ffbb;
}
.card .meta {
  font-size: 13px;
  opacity: 0.9;
  margin-bottom: 14px;
  font-style: italic;
  color: #c7cdf0;
}
.counter {
  font-weight: 700;
  font-size: 15px;
  letter-spacing: 0.15px;
  color: #e2e8ff;
  text-shadow: 0 0 4px #a2b8ffcc;
}

/* Silme butonu */
.card .deleteBtn {
  position: absolute;
  top: 12px;
  right: 12px;
  background: #ff4b4bcc;
  border: 1px solid #ff4b4bee;
  padding: 7px 10px;
  border-radius: 10px;
  display: none;
  cursor: pointer;
  color: #fff;
  font-weight: 700;
  font-size: 14px;
  transition: background 0.3s ease;
}
.card.deleteMode .deleteBtn {
  display: block;
}
.card .deleteBtn:hover {
  background: #ff0000dd;
}

/* Empty message */
.panel-empty {
  text-align: center;
  padding: 24px 10px;
  color: rgba(255, 255, 255, 0.7);
  font-style: italic;
  font-size: 16px;
  display: none;
}

/* Modal */
.modal {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(6, 8, 12, 0.55);
  backdrop-filter: blur(8px);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.25s ease;
  z-index: 20;
}
.modal.show {
  opacity: 1;
  pointer-events: all;
}
.modal-card {
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.015));
  border-radius: 18px;
  padding: 24px 26px;
  width: 360px;
  border: 1.5px solid rgba(255, 255, 255, 0.10);
  box-shadow: 0 12px 38px rgba(3, 7, 20, 0.8);
  color: #eef6ff;
  font-weight: 600;
}
.modal-card h3 {
  margin: 0 0 14px 0;
  font-size: 21px;
  font-weight: 700;
  text-align: center;
  color: #aac8ff;
  text-shadow: 0 0 8px #6c93ffbb;
}
.modal-card label {
  display: block;
  font-size: 14px;
  margin: 12px 0 6px 0;
  color: #d4dbf7;
}
.modal-card input,
.modal-card select {
  width: 100%;
  padding: 12px 14px;
  border-radius: 12px;
  border: 1px solid rgba(255, 255, 255, 0.10);
  background: transparent;
  color: #d8e2ff;
  box-sizing: border-box;
  font-size: 16px;
  font-weight: 600;
  transition: border-color 0.25s ease;
}
.modal-card input:focus,
.modal-card select:focus {
  outline: none;
  border-color: #7193ff;
  background: rgba(113, 147, 255, 0.1);
}
.modal-actions {
  display: flex;
  justify-content: flex-end;
  gap: 14px;
  margin-top: 20px;
}
.btn {
  padding: 10px 16px;
  border-radius: 14px;
  cursor: pointer;
  border: 1px solid rgba(255, 255, 255, 0.10);
  background: transparent;
  color: #cbd5ff;
  font-weight: 700;
  font-size: 15px;
  transition: background 0.3s ease;
}
.btn.primary {
  background: linear-gradient(90deg, #6fd3ff88, #9ae3ff55);
  color: #041022;
  font-weight: 700;
  border: none;
  box-shadow: 0 0 15px #5aa2ffbb;
}
.btn:hover {
  background: rgba(255, 255, 255, 0.07);
}
.btn.primary:hover {
  background: linear-gradient(90deg, #7be1ffcc, #a9f0ffcc);
}

/* Toast */
.toast {
  position: fixed;
  left: 50%;
  transform: translateX(-50%);
  bottom: 24px;
  background: rgba(0, 0, 0, 0.75);
  padding: 12px 18px;
  border-radius: 14px;
  color: #e3e9ff;
  font-weight: 600;
  font-size: 15px;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.25s ease;
  box-shadow: 0 0 16px #607affbb;
  z-index: 30;
}
.toast.show {
  opacity: 1;
  pointer-events: all;
}

@media (max-width: 520px) {
  .modal-card {
    width: 92%;
  }
  .cards-list {
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  }
}
</style>
</head>
<body>

<div id="specialDaysApp">
  <!-- √úst bar -->
  <header class="sd-header">
    <h1>√ñzel G√ºnlerimiz </h1>
    <div class="sd-menu">
      <button id="menuBtn" aria-label="menu" title="Men√º">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" >
          <rect x="4" y="6" width="16" height="2" rx="1"></rect>
          <rect x="4" y="11" width="16" height="2" rx="1"></rect>
          <rect x="4" y="16" width="16" height="2" rx="1"></rect>
        </svg>
      </button>
      <div id="menuPopup" class="sd-menu-popup">
        <button id="openAddBtn">Ekle</button>
        <button id="toggleDeleteBtn">Sil</button>
        <button id="clearAllBtn">T√ºm√ºn√º Temizle</button>
      </div>
    </div>
  </header>

  <!-- A√ßƒ±lƒ±r cam kutusu butonu -->
  <div class="glass-toggle-wrap">
    <button id="glassToggle" class="glass-btn" aria-expanded="false">√ñzel G√ºnleri A√ß</button>
  </div>

  <!-- Glass panel -->
  <section id="glassPanel" class="glass-panel" aria-hidden="true">
    <div class="panel-header">
      <h2>√ñzel G√ºnler</h2>
      <div class="panel-actions">
        <button id="addQuickBtn">+ Ekle</button>
      </div>
    </div>
    <div id="cardsList" class="cards-list"></div>
    <div class="panel-empty" id="emptyMsg">Hen√ºz √∂zel g√ºn yok. Ekle butonuna basƒ±n üôÇ</div>
  </section>

  <!-- Ekleme modal -->
  <div id="addModal" class="modal" aria-hidden="true">
    <div class="modal-card">
      <h3>Yeni √ñzel G√ºn Ekle</h3>
      <form id="addForm">
        <label>Ba≈ülƒ±k
          <input type="text" id="titleInput" required placeholder="√ñrneƒüin: Doƒüum G√ºn√º" />
        </label>
        <label>Tarih
          <input type="date" id="dateInput" required />
        </label>
        <label>Saya√ß T√ºr√º
          <select id="modeSelect">
            <option value="countdown">Geri Sayƒ±m</option>
            <option value="countup">ƒ∞leri Saya√ß</option>
          </select>
        </label>
        <div class="modal-actions">
          <button type="submit" class="btn primary">Ekle</button>
          <button type="button" id="cancelAdd" class="btn">ƒ∞ptal</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast"></div>
</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

<script>
/* --- JAVASCRIPT BA≈ûLANGI√á --- */
// Firebase config buraya kendi Firebase projenin bilgilerini koyacaksƒ±n:
const firebaseConfig = {
  apiKey: "AIzaSyB0wYo4y9xi1lZSwi02iJQ7v0iZ-nq8y-U",
  authDomain: "chat-f5f0c.firebaseapp.com",
  databaseURL: "https://chat-f5f0c-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "chat-f5f0c",
  storageBucket: "chat-f5f0c.appspot.com",
  messagingSenderId: "571398938754",
  appId: "1:571398938754:web:147a9e1d0106e8a0a4d49b",
  measurementId: "G-CFZ8PWP6DY"
};

// Firebase ba≈ülat
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

const glassToggle = document.getElementById('glassToggle');
const glassPanel = document.getElementById('glassPanel');
const menuBtn = document.getElementById('menuBtn');
const menuPopup = document.getElementById('menuPopup');
const openAddBtn = document.getElementById('openAddBtn');
const addQuickBtn = document.getElementById('addQuickBtn');
const toggleDeleteBtn = document.getElementById('toggleDeleteBtn');
const clearAllBtn = document.getElementById('clearAllBtn');
const cardsList = document.getElementById('cardsList');
const addModal = document.getElementById('addModal');
const cancelAdd = document.getElementById('cancelAdd');
const addForm = document.getElementById('addForm');
const toast = document.getElementById('toast');

let state = {
  items: [],
  deleteMode: false,
  intervals: new Map()
};

function showToast(msg){
  toast.textContent = msg;
  toast.classList.add('show');
  clearTimeout(toast.timeout);
  toast.timeout = setTimeout(() => toast.classList.remove('show'), 2500);
}

function formatDateISO(dateStr){
  const d = new Date(dateStr);
  if(isNaN(d)) return '';
  return d.toLocaleDateString('tr-TR', {year:'numeric', month:'2-digit', day:'2-digit'});
}

// Firebase‚Äôden veriyi dinle
function listenItems(){
  db.ref('specialDays').on('value', (snapshot) => {
    const data = snapshot.val();
    state.items = [];
    if(data){
      Object.keys(data).forEach(key => {
        state.items.push({
          id: key,
          title: data[key].title,
          date: data[key].date,
          mode: data[key].mode
        });
      });
    }
    render();
  });
}

// Firebase‚Äôe kayƒ±t
function saveItems(){
  // Firebase'de t√ºm veriyi deƒüi≈ütiriyoruz
  // (dilersen sadece tek eleman da g√ºncelleyebilirsin)
  const dataObj = {};
  state.items.forEach(item => {
    dataObj[item.id] = {
      title: item.title,
      date: item.date,
      mode: item.mode
    };
  });
  db.ref('specialDays').set(dataObj).catch(err => {
    showToast('Kayƒ±t hatasƒ±: ' + err.message);
  });
}

// Kartlarƒ± √ßiz
function render(){
  // √ñnce interval temizle
  state.intervals.forEach(iid => clearInterval(iid));
  state.intervals.clear();

  cardsList.innerHTML = '';

  if(state.items.length === 0){
    document.getElementById('emptyMsg').style.display = 'block';
  } else {
    document.getElementById('emptyMsg').style.display = 'none';
  }

  state.items.forEach((item, idx) => {
    const card = document.createElement('article');
    card.className = 'card';
    card.dataset.id = item.id;

    // Sil butonu
    const delBtn = document.createElement('button');
    delBtn.className = 'deleteBtn';
    delBtn.textContent = '√ó';
    delBtn.onclick = (e) => {
      e.stopPropagation();
      deleteItem(item.id);
    };

    const h = document.createElement('h4');
    h.textContent = item.title;

    const meta = document.createElement('div');
    meta.className = 'meta';
    meta.textContent = 'Tarih: ' + formatDateISO(item.date);

    const counter = document.createElement('div');
    counter.className = 'counter';

    card.append(delBtn, h, meta, counter);

    if(state.deleteMode) card.classList.add('deleteMode');

    card.onclick = () => {
      if(state.deleteMode) return;
      item.mode = item.mode === 'countdown' ? 'countup' : 'countdown';
      saveItems();
    };

    cardsList.appendChild(card);

    setTimeout(() => card.classList.add('show'), 30 + idx * 40);

    startCounter(item, counter);
  });
}

function humanizeTime(ms){
  const sign = ms < 0 ? '-' : '';
  const abs = Math.abs(ms);
  const sec = Math.floor(abs / 1000) % 60;
  const min = Math.floor(abs / (1000 * 60)) % 60;
  const hr  = Math.floor(abs / (1000 * 60 * 60)) % 24;
  const days = Math.floor(abs / (1000 * 60 * 60 * 24));
  return `${sign}${days} g√ºn ${hr} saat ${min} dk ${sec} sn`;
}

function startCounter(item, el){
  const id = item.id;
  update();
  const iid = setInterval(update, 1000);
  state.intervals.set(id, iid);

  function update(){
    const now = new Date();
    const target = new Date(item.date + 'T00:00:00');
    if(item.mode === 'countdown'){
      const diff = target.getTime() - now.getTime();
      el.textContent = diff > 0 ? `Kalan: ${humanizeTime(diff)}` : `Tarih ge√ßti: ${humanizeTime(diff)}`;
    } else {
      const diff = now.getTime() - target.getTime();
      el.textContent = diff >= 0 ? `Ge√ßen s√ºre: ${humanizeTime(diff)}` : `Hen√ºz ba≈ülamadƒ±: ${humanizeTime(diff)}`;
    }
  }
}

function addItem({title,date,mode}){
  const newId = db.ref().child('specialDays').push().key;
  const newItem = {id: newId, title, date, mode};
  state.items.unshift(newItem);
  saveItems();
  render();
  showToast('Eklendi ‚úÖ');
}
function deleteItem(id){
  // Firebase'den sil
  db.ref('specialDays/' + id).remove()
  .then(() => {
    state.items = state.items.filter(i => i.id !== id);
    render();
    showToast('Silindi ‚ùå');
  }).catch(err => {
    showToast('Silme hatasƒ±: ' + err.message);
  });
}
function clearAll(){
  if(confirm('T√ºm√ºn√º silmek istiyor musun?')){
    db.ref('specialDays').remove()
    .then(() => {
      state.items = [];
      render();
      showToast('Temizlendi üßπ');
    }).catch(err => {
      showToast('Temizleme hatasƒ±: ' + err.message);
    });
  }
}

glassToggle.onclick = () => {
  const open = glassPanel.classList.toggle('open');
  glassToggle.textContent = open ? '√ñzel G√ºnleri Kapat' : '√ñzel G√ºnleri A√ß';
  glassToggle.setAttribute('aria-expanded', open);
};

menuBtn.onclick = (e) => {
  e.stopPropagation();
  menuPopup.style.display = menuPopup.style.display === 'flex' ? 'none' : 'flex';
  menuPopup.style.flexDirection = 'column';
};
document.addEventListener('click', () => menuPopup.style.display = 'none');
openAddBtn.onclick = (e) => { e.stopPropagation(); openModal(); };
addQuickBtn.onclick = openModal;
toggleDeleteBtn.onclick = () => {
  state.deleteMode = !state.deleteMode;
  render();
  showToast(state.deleteMode ? 'Silme modu a√ßƒ±k' : 'Silme modu kapalƒ±');
};
clearAllBtn.onclick = clearAll;

function openModal(){
  addModal.classList.add('show');
  addModal.setAttribute('aria-hidden','false');
  addForm.reset();
  document.getElementById('dateInput').valueAsDate = new Date();
}
function closeModal(){
  addModal.classList.remove('show');
  addModal.setAttribute('aria-hidden','true');
}
cancelAdd.onclick = closeModal;
addModal.onclick = (e) => {
  if(e.target === addModal) closeModal();
};

addForm.onsubmit = (e) => {
  e.preventDefault();
  const title = document.getElementById('titleInput').value.trim();
  const date = document.getElementById('dateInput').value;
  const mode = document.getElementById('modeSelect').value;
  if(!title || !date) return showToast('Ba≈ülƒ±k ve tarih gerekli');
  const chosenDate = new Date(date + 'T00:00:00');
  const now = new Date();
  if(mode === 'countdown' && chosenDate < now){
    if(!confirm('Tarih ge√ßmi≈ü. Yine de "Geri Sayƒ±m" olarak eklemek istiyor musunuz? (Hayƒ±r se√ßerseniz "ƒ∞leri Saya√ß" se√ßilecek)')){
      addItem({title, date, mode: 'countup'});
      closeModal();
      return;
    }
  }
  addItem({title, date, mode});
  closeModal();
};

listenItems();
/* --- JAVASCRIPT Bƒ∞Tƒ∞≈û --- */
</script>

</body>
  </html>
  
